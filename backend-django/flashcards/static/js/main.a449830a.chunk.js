(this.webpackJsonpflashcards=this.webpackJsonpflashcards||[]).push([[0],{15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(2),l=a.n(c),o=a(1);var i=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t};var s=function(e,t,a,n){var r=new XMLHttpRequest,c=JSON.stringify(a);r.responseType="json",r.open(e,"http://".concat(window.location.hostname,"/api").concat(t));var l=i("csrftoken");"POST"!==e&&"DELETE"!==e||(r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",l)),r.onload=function(){n(r.response,r.status)},r.send(c)};var u=function(e){var t=e.reference,a=e.handleChange,n=e.className,c=e.lecture,l=[{name:"LinAl",long:"Lineare Algebra"},{name:"ERA",long:"Analysis 1"},{name:"ERA",long:"Digitaltechnik"},{name:"ERA",long:"Computertechnik"},{name:"ERA",long:"Schaltungstheorie"}].map((function(e,t){return r.a.createElement("option",{key:t,value:e.long},e.long)}));return r.a.createElement("div",null,r.a.createElement("select",{ref:t,defaultValue:c,onChange:a,className:n,style:{height:40,padding:5}},l))},m=a(3),d=a(4),f=a.n(d);function v(){var e=Object(m.a)(["",""]);return v=function(){return e},e}function h(){var e=Object(m.a)(["",""]);return h=function(){return e},e}var E=function(e){var t=Object(n.useState)(!0),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!1),u=Object(o.a)(i,2),m=u[0],d=u[1],E=Object(n.useState)(!1),p=Object(o.a)(E,2),b=p[0],g=p[1],w=e.card,y=e.username,R=e.create;return r.a.createElement("div",{style:c?{display:"block"}:{display:"none"},onMouseEnter:function(){g(!0)},onMouseLeave:function(){g(!1)}},r.a.createElement("hr",null),!R&&r.a.createElement("div",{className:"form-inline",style:b?{display:"block"}:{visibility:"hidden"}},y===w.username&&r.a.createElement("button",{className:"mx-1 btn btn-danger mb-1",onClick:function(){return e=w.id,void s("DELETE","/cards/".concat(e,"/delete"),{},(function(e,t){200===t&&l(!1)}));var e}},"Delete"),r.a.createElement("button",{className:"mx-1 btn btn-primary mb-1",onClick:function(){return w.id,void d(!m)}},m?"Hide":"Show"),r.a.createElement("button",{className:"mx-1 btn btn-warning mb-1",onClick:function(){return function(e){window.location.href="http://".concat(window.location.hostname,"/?edit=true&id=")+e.id}(w)}},"Edit")),!R&&r.a.createElement("p",{className:"mt-2 text-muted",style:{fontSize:14,marginBottom:2}},r.a.createElement("a",{href:"http://".concat(window.location.hostname,"/cards/").concat(w.username)},"@",w.username),", ",w.lecture,", ",w.time&&w.time.split("T")[0]),r.a.createElement("h3",{className:"mb-4"},r.a.createElement(f.a,{math:String.raw(h(),w.question)})),r.a.createElement("p",{style:m|R?{display:"block"}:{visibility:"hidden"}},r.a.createElement(f.a,{math:String.raw(v(),w.answer)})))};var p=function(e){var t=e.lecture,a=e.cardId,c=Object(n.useState)(!1),l=Object(o.a)(c,2),i=l[0],m=l[1],d=Object(n.useState)(200),f=Object(o.a)(d,2),v=f[0],h=f[1],p=r.a.createRef,b="";return b=""===a?"/cards/1/?random=true&lecture="+t:"/cards/"+a,i||s("GET",b,{},(function(e,t){m(e),h(t)})),r.a.createElement("div",{className:"container"},200===v?r.a.createElement("div",null,r.a.createElement(E,{card:i}),r.a.createElement("button",{className:"mx-1 btn btn-secondary mb-1",onClick:function(){window.location.href="http://".concat(window.location.hostname,":8000/test/?lecture=")+t}},"Next")):r.a.createElement("h2",{className:"my-4"},"No cards available for this topic."),r.a.createElement(u,{reference:p,handleChange:function(e){window.location.href="http://".concat(window.location.hostname,":8000/test/?lecture=")+e.target.value},lecture:t}))};var b=function(e,t,a,n){t&&s("POST","/cards/".concat(a,"/delete/?edit=").concat(t),{},(function(e,t){console.log(e)})),s("POST","/cards/create/",e,n)};function g(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}function w(){var e=Object(n.useState)(g()),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r(g())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}var y=function(e){var t=r.a.createRef(),a=r.a.createRef(),c=r.a.createRef(),l=Object(n.useState)([]),i=Object(o.a)(l,2),m=i[0],d=i[1],f=Object(n.useState)([]),v=Object(o.a)(f,2),h=v[0],p=v[1];e.edit&&s("GET","/cards/".concat(e.cardId),{},(function(e,n){t.current.value=e.question,a.current.value=e.answer,c.current.value=e.lecture}));var g=function(e){"Enter"===e.key&&(e.target.value+=" <br />")};return r.a.createElement("div",null,r.a.createElement("div",{style:{margin:"0 auto",textAlign:"center",marginTop:80}},r.a.createElement("h1",{mar:!0},"Create a flashcard!")),r.a.createElement("div",{style:{marginLeft:.15*w().width,marginRight:.15*w().width,marginTop:50}},r.a.createElement("form",{onSubmit:function(n){n.preventDefault();var r=t.current.value,l=a.current.value,o=c.current.value;b({question:r,answer:l,lecture:o},e.edit,e.cardId,(function(e,t){403===t&&(window.location.href="http://".concat(window.location.hostname,"/login"))})),t.current.value="",a.current.value=""}},r.a.createElement("div",{className:"form-inline"},r.a.createElement("textarea",{style:{width:.32*w().width,margin:"auto",height:100},ref:t,required:!0,className:"form-control my-2",placeholder:"Question",onChange:function(){d(t.current.value)},onKeyDown:g}),r.a.createElement("textarea",{style:{width:.32*w().width,margin:"auto",height:100},ref:a,required:!0,className:"form-control my-2",placeholder:"Answer",onChange:function(){p(a.current.value)},onKeyDown:g})),r.a.createElement("div",{className:"form-inline",style:{marginTop:20,marginBottom:20}},r.a.createElement(u,{reference:c,className:"selectpicker mx-4"}),r.a.createElement("button",{type:"submit",style:{width:80},className:"btn btn-primary my-3"},"Submit"))),r.a.createElement(E,{card:{question:m,answer:h},create:!0})))};var R=function(e){var t=r.a.createRef(),a=r.a.createRef(),n=new FormData;return r.a.createElement("div",{className:"container my-4"},r.a.createElement("h2",null,"Upload Anki file here"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n.append("lecture",a.current.value);var t=new XMLHttpRequest,r="http://".concat(window.location.hostname,"/api/cards/upload/");t.open("POST",r),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("X-CSRFToken",i("csrftoken")),t.onload=function(){200===t.status?window.location.href="http://".concat(window.location.hostname,"/"):403===t.status&&(window.location.href="http://".concat(window.location.hostname,"/login"))},t.send(n)},encType:"multipart/form-data"},r.a.createElement("input",{ref:t,type:"file",name:"file",onChange:function(e){n.append("file",e.target.files[0])}}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement(u,{reference:a})))};var N=function(e){var t=e.pRef,a=e.onChange,n=e.entries;return r.a.createElement("select",{ref:t,style:{marginRight:10,width:120,height:40,padding:5},onChange:a},n)};var O=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!1),u=Object(o.a)(i,2),m=u[0],d=u[1],f=Object(n.useState)(!1),v=Object(o.a)(f,2),h=v[0],E=v[1],p=r.a.createRef(),b=r.a.createRef(),g=r.a.createRef(),w=r.a.createRef(),y=function(e){var t=function(e,t){var a=e.map((function(e){return r.a.createElement("option",{key:e.username,value:e.username},e.username)}));d(a)};s("GET","/auth/users/?role=".concat(e,"&action=exclude"),"",t),t=function(e,t){var a=e.map((function(e){return r.a.createElement("option",{key:e.username,value:e.username},e.username)}));E(a)},s("GET","/auth/users/?role=".concat(e,"&action=include"),"",t)};if(!c){s("GET","/auth/roles","",(function(e,t){var a=e.map((function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)}));l(a)}))}return m||y("admin"),r.a.createElement("div",null,r.a.createElement("h1",{style:{marginTop:20}},"Manage roles"),r.a.createElement("div",{className:"row",style:{marginTop:30}},r.a.createElement("div",{className:"col-2"},r.a.createElement(N,{pRef:p,onChange:function(e){y(p.current.value)},entries:c})),r.a.createElement("div",{className:"col-2"},r.a.createElement(N,{pRef:b,entries:m})),r.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:function(e){e.preventDefault();s("POST","/auth/roles/assign",{username:b.current.value,role:p.current.value,action:"assign"},(function(e,t){y(p.current.value)}))},style:{width:120}},"Assign Role")),r.a.createElement("div",{className:"row",style:{marginTop:20}},r.a.createElement("div",{className:"col-2"}),r.a.createElement("div",{className:"col-2"},r.a.createElement(N,{pRef:g,entries:h})),r.a.createElement("button",{className:"btn btn-danger",type:"submit",onClick:function(e){e.preventDefault();s("POST","/auth/roles/assign",{username:g.current.value,role:p.current.value,action:"delete"},(function(e,t){y(p.current.value)}))},style:{width:120}},"Remove Role")),r.a.createElement("div",{className:"row",style:{marginTop:50}},r.a.createElement("div",{className:"col-3"},r.a.createElement("input",{ref:w,type:"text",placeholder:" Role name",style:{marginRight:10,height:40,width:200}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-success",type:"submit",onClick:function(e){e.preventDefault();s("POST","/auth/roles/create",w.current.value,(function(e,t){l(!1)}))},style:{width:120}},"Create Role"))))};var k=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!1),u=Object(o.a)(i,2),m=u[0],d=u[1],f=r.a.createRef();if(!c){s("GET","/auth/users/?action=all","",(function(e,t){var a=e.map((function(e){return r.a.createElement("option",{key:e.username,value:e.username},e.username)}));l(a)}))}return r.a.createElement("div",null,r.a.createElement("h1",{style:{marginTop:50}},"Manage users"),r.a.createElement("div",{className:"row",style:{marginTop:30}},r.a.createElement("div",{className:"col-2"},r.a.createElement(N,{pRef:f,entries:c})),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-danger",type:"submit",onClick:function(e){e.preventDefault(),d(!0)},style:{marginRight:10,width:120}},"Delete user"),m&&r.a.createElement("button",{className:"btn btn-secondary",type:"submit",onClick:function(e){e.preventDefault();s("DELETE","/auth/users/delete",{username:f.current.value},(function(e,t){console.log(e)})),d(!1)},style:{marginTop:5,width:120}},"Sure?"))))};var S=function(e){return r.a.createElement("div",{className:"container"},r.a.createElement(O,null),r.a.createElement(k,null))};var T=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],l=a[1],i=e.username,u=e.card_id,m=e.currentUser,d="/cards/list/";if(i?d="/cards/list/?username=".concat(i):u&&(d="/cards/"+u),!c){s("GET",d,{},(function(e,t){l(e)}))}return r.a.createElement("div",{style:{marginTop:50}},c&&c.map((function(e,t){return r.a.createElement("div",{key:t,className:"container"},r.a.createElement(E,{card:e,key:e.id,username:m,create:!1}))})))},j=r.a.createElement,C=document.getElementById("card-form");C&&l.a.render(j(y,C.dataset),C);var q=document.getElementById("card-list");q&&l.a.render(j(T,q.dataset),q);var D=document.getElementsByClassName("card-test")[0];D&&l.a.render(j(p,D.dataset),D);var x=document.getElementById("card-upload");x&&l.a.render(r.a.createElement(R,null),x);var L=document.getElementById("manage");L&&l.a.render(j(S,L.dataset),L)},6:function(e,t,a){e.exports=a(15)}},[[6,1,2]]]);
//# sourceMappingURL=main.a449830a.chunk.js.map