(this.webpackJsonpflashcards=this.webpackJsonpflashcards||[]).push([[0],{12:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(5),o=a.n(r),l=a(1);var i=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var c=a[n].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t};var s=function(e,t,a,n){var c=new XMLHttpRequest,r=JSON.stringify(a);c.responseType="json",c.open(e,"http://".concat(window.location.hostname,":8000/api").concat(t));var o=i("csrftoken");"POST"!==e&&"DELETE"!==e||(c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("X-CSRFToken",o)),c.onload=function(){n(c.response,c.status)},c.send(r)};var u=function(e){var t=e.reference,a=e.handleChange,n=e.className,r=e.lecture,o=[{name:"LinAl",long:"Lineare Algebra"},{name:"ERA",long:"Analysis 1"},{name:"ERA",long:"Digitaltechnik"},{name:"ERA",long:"Computertechnik"},{name:"ERA",long:"Schaltungstheorie"}].map((function(e,t){return c.a.createElement("option",{key:t,value:e.long},e.long)}));return c.a.createElement("div",null,c.a.createElement("select",{ref:t,defaultValue:r,onChange:a,className:n},o))};var m=function(e){var t=Object(n.useState)(!0),a=Object(l.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(!1),u=Object(l.a)(i,2),m=u[0],d=u[1],f=e.card;return c.a.createElement("div",{style:r?{display:"block"}:{display:"none"}},c.a.createElement("p",{className:"mt-2 text-muted",style:{fontSize:14,marginBottom:2}},c.a.createElement("a",{href:"http://".concat(window.location.hostname,":8000/cards/").concat(f.username)},"@",f.username),", ",f.lecture,", ",f.time&&f.time.split("T")[0]),c.a.createElement("div",{className:"form-inline"},c.a.createElement("button",{className:"mx-1 btn btn-danger mb-1",onClick:function(){return e=f.id,void s("DELETE","/cards/".concat(e,"/delete"),{},(function(e,t){200===t&&o(!1)}));var e}},"Delete"),c.a.createElement("button",{className:"mx-1 btn btn-primary mb-1",onClick:function(){return f.id,void d(!m)}},m?"Hide":"Show"),c.a.createElement("button",{className:"mx-1 btn btn-warning mb-1",onClick:function(){return function(e){window.location.href="http://".concat(window.location.hostname,":8000/?edit=true&id=")+e.id}(f)}},"Edit")),c.a.createElement("h3",{className:"mb-4"},f.question),c.a.createElement("p",{style:m?{display:"block"}:{visibility:"hidden"}},f.answer))};var d=function(e){var t=e.lecture,a=e.cardId,r=Object(n.useState)(!1),o=Object(l.a)(r,2),i=o[0],d=o[1],f=Object(n.useState)(200),p=Object(l.a)(f,2),h=p[0],b=p[1],E=c.a.createRef,v="";return v=""===a?"/cards/1/?random=true&lecture="+t:"/cards/"+a,i||s("GET",v,{},(function(e,t){d(e),b(t)})),c.a.createElement("div",{className:"container"},200===h?c.a.createElement("div",null,c.a.createElement(m,{card:i}),c.a.createElement("button",{className:"mx-1 btn btn-secondary mb-1",onClick:function(){window.location.href="http://".concat(window.location.hostname,":8000/test/?lecture=")+t}},"Next")):c.a.createElement("h2",{className:"my-4"},"No cards available for this topic."),c.a.createElement(u,{reference:E,handleChange:function(e){window.location.href="http://".concat(window.location.hostname,":8000/test/?lecture=")+e.target.value},lecture:t}))},f=a(4);var p=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)([]),u=Object(l.a)(i,2),d=u[0],p=u[1],h=e.username,b=e.card_id,E="/cards/list/";return h?E="/cards/list/?username=".concat(h):b&&(E="/cards/"+b),Object(n.useEffect)((function(){var t=Object(f.a)(e.newCards).concat(d);t.length!==r.length&&o(t)}),[e.newCards,r,d]),Object(n.useEffect)((function(){s("GET",E,{},(function(e,t){p(e)}))}),[E]),c.a.createElement("div",{style:{marginTop:50}},r.map((function(e,t){return c.a.createElement("div",{key:t,className:"container"},c.a.createElement(m,{card:e,key:e.id}))})))};var h=function(e,t,a,n){t&&s("POST","/cards/".concat(a,"/delete/?edit=").concat(t),{},(function(e,t){console.log(e)})),s("POST","/cards/create/",e,n)};var b=function(e){var t=c.a.createRef(),a=c.a.createRef(),r=c.a.createRef();e.edit&&s("GET","/cards/".concat(e.cardId),{},(function(e,n){t.current.value=e.question,a.current.value=e.answer,r.current.value=e.lecture}));var o=Object(n.useState)([]),i=Object(l.a)(o,2),m=i[0],d=i[1];return c.a.createElement("div",{className:"container"},c.a.createElement("form",{onSubmit:function(n){n.preventDefault();var c=t.current.value,o=a.current.value,l=r.current.value,i=Object(f.a)(m);h({question:c,answer:o,lecture:l},e.edit,e.cardId,(function(e,t){403===t?window.location.href="http://".concat(window.location.hostname,":8000/login"):200===t&&(i.unshift(e),d(i),window.location.href="http://".concat(window.location.hostname,":8000/"))})),t.current.value="",a.current.value=""}},c.a.createElement("textarea",{ref:t,required:!0,className:"form-control my-2",placeholder:"Question"}),c.a.createElement("textarea",{ref:a,required:!0,className:"form-control my-2",placeholder:"Answer"}),c.a.createElement("div",{className:"form-inline container"},c.a.createElement(u,{reference:r,className:"selectpicker mx-4"}),c.a.createElement("button",{type:"submit",className:"btn btn-primary my-3 col-1"},"Submit"))),c.a.createElement(p,{newCards:m,username:e.username,card_id:e.cardId}))};var E=function(e){var t=c.a.createRef(),a=c.a.createRef(),n=new FormData;return c.a.createElement("div",{className:"container my-4"},c.a.createElement("h2",null,"Upload Anki file here"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n.append("lecture",a.current.value);var t=new XMLHttpRequest,c="http://".concat(window.location.hostname,":8000/api/cards/upload/");t.open("POST",c),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("X-CSRFToken",i("csrftoken")),t.onload=function(){200===t.status?window.location.href="http://".concat(window.location.hostname,":8000/"):403===t.status&&(window.location.href="http://".concat(window.location.hostname,":8000/login"))},t.send(n)},encType:"multipart/form-data"},c.a.createElement("input",{ref:t,type:"file",name:"file",onChange:function(e){n.append("file",e.target.files[0])}}),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),c.a.createElement(u,{reference:a})))},v=c.a.createElement,w=document.getElementById("card-form");w&&o.a.render(v(b,w.dataset),w);var g=document.getElementsByClassName("card-test")[0];g&&(console.log(g.dataset),o.a.render(v(d,g.dataset),g));var y=document.getElementById("card-upload");y&&o.a.render(c.a.createElement(E,null),y)},7:function(e,t,a){e.exports=a(12)}},[[7,1,2]]]);
//# sourceMappingURL=main.c07746b8.chunk.js.map