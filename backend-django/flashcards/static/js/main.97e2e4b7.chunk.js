(this.webpackJsonpflashcards=this.webpackJsonpflashcards||[]).push([[0],{18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c),l=a(1);var i=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t};var s=function(e,t,a,n){var r=new XMLHttpRequest,c=JSON.stringify(a);r.responseType="json",r.open(e,"http://".concat(window.location.hostname,"/api").concat(t));var o=i("csrftoken");"POST"!==e&&"DELETE"!==e||(r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",o)),r.onload=function(){n(r.response,r.status)},r.send(c)};var u=function(e){var t=e.reference,a=e.handleChange,n=e.className,c=e.lecture,o=[{name:"LinAl",long:"Lineare Algebra"},{name:"ERA",long:"Analysis 1"},{name:"ERA",long:"Digitaltechnik"},{name:"ERA",long:"Computertechnik"},{name:"ERA",long:"Schaltungstheorie"}].map((function(e,t){return r.a.createElement("option",{key:t,value:e.long},e.long)}));return r.a.createElement("div",null,r.a.createElement("select",{ref:t,defaultValue:c,onChange:a,className:n},o))},m=a(6),d=a(7),f=a.n(d);function p(){var e=Object(m.a)(["",""]);return p=function(){return e},e}function b(){var e=Object(m.a)(["",""]);return b=function(){return e},e}var h=function(e){var t=Object(n.useState)(!0),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),u=Object(l.a)(i,2),m=u[0],d=u[1],h=e.card;return r.a.createElement("div",{style:c?{display:"block"}:{display:"none"}},r.a.createElement("p",{className:"mt-2 text-muted",style:{fontSize:14,marginBottom:2}},r.a.createElement("a",{href:"http://".concat(window.location.hostname,"/cards/").concat(h.username)},"@",h.username),", ",h.lecture,", ",h.time&&h.time.split("T")[0]),r.a.createElement("div",{className:"form-inline"},r.a.createElement("button",{className:"mx-1 btn btn-danger mb-1",onClick:function(){return e=h.id,void s("DELETE","/cards/".concat(e,"/delete"),{},(function(e,t){200===t&&o(!1)}));var e}},"Delete"),r.a.createElement("button",{className:"mx-1 btn btn-primary mb-1",onClick:function(){return h.id,void d(!m)}},m?"Hide":"Show"),r.a.createElement("button",{className:"mx-1 btn btn-warning mb-1",onClick:function(){return function(e){window.location.href="http://".concat(window.location.hostname,"/?edit=true&id=")+e.id}(h)}},"Edit")),r.a.createElement("h3",{className:"mb-4"},r.a.createElement(f.a,{math:String.raw(b(),h.question)})),r.a.createElement("p",{style:m?{display:"block"}:{visibility:"hidden"}},r.a.createElement(f.a,{math:String.raw(p(),h.answer)})))};var E=function(e){var t=e.lecture,a=e.cardId,c=Object(n.useState)(!1),o=Object(l.a)(c,2),i=o[0],m=o[1],d=Object(n.useState)(200),f=Object(l.a)(d,2),p=f[0],b=f[1],E=r.a.createRef,v="";return v=""===a?"/cards/1/?random=true&lecture="+t:"/cards/"+a,i||s("GET",v,{},(function(e,t){m(e),b(t)})),r.a.createElement("div",{className:"container"},200===p?r.a.createElement("div",null,r.a.createElement(h,{card:i}),r.a.createElement("button",{className:"mx-1 btn btn-secondary mb-1",onClick:function(){window.location.href="http://".concat(window.location.hostname,":8000/test/?lecture=")+t}},"Next")):r.a.createElement("h2",{className:"my-4"},"No cards available for this topic."),r.a.createElement(u,{reference:E,handleChange:function(e){window.location.href="http://".concat(window.location.hostname,":8000/test/?lecture=")+e.target.value},lecture:t}))},v=a(4);var w=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)([]),u=Object(l.a)(i,2),m=u[0],d=u[1],f=e.username,p=e.card_id,b="/cards/list/";return f?b="/cards/list/?username=".concat(f):p&&(b="/cards/"+p),Object(n.useEffect)((function(){var t=Object(v.a)(e.newCards).concat(m);t.length!==c.length&&o(t)}),[e.newCards,c,m]),Object(n.useEffect)((function(){s("GET",b,{},(function(e,t){d(e)}))}),[b]),r.a.createElement("div",{style:{marginTop:50}},c.map((function(e,t){return r.a.createElement("div",{key:t,className:"container"},r.a.createElement(h,{card:e,key:e.id}))})))};var g=function(e,t,a,n){t&&s("POST","/cards/".concat(a,"/delete/?edit=").concat(t),{},(function(e,t){console.log(e)})),s("POST","/cards/create/",e,n)};var y=function(e){var t=r.a.createRef(),a=r.a.createRef(),c=r.a.createRef();e.edit&&s("GET","/cards/".concat(e.cardId),{},(function(e,n){t.current.value=e.question,a.current.value=e.answer,c.current.value=e.lecture}));var o=Object(n.useState)([]),i=Object(l.a)(o,2),m=i[0],d=i[1];return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:function(n){n.preventDefault();var r=t.current.value,o=a.current.value,l=c.current.value,i=Object(v.a)(m);g({question:r,answer:o,lecture:l},e.edit,e.cardId,(function(e,t){403===t?window.location.href="http://".concat(window.location.hostname,"/login"):200===t&&(i.unshift(e),d(i))})),t.current.value="",a.current.value=""}},r.a.createElement("textarea",{ref:t,required:!0,className:"form-control my-2",placeholder:"Question"}),r.a.createElement("textarea",{ref:a,required:!0,className:"form-control my-2",placeholder:"Answer"}),r.a.createElement("div",{className:"form-inline container"},r.a.createElement(u,{reference:c,className:"selectpicker mx-4"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary my-3 col-1"},"Submit"))),r.a.createElement(w,{newCards:m,username:e.username,card_id:e.cardId}))};var O=function(e){var t=r.a.createRef(),a=r.a.createRef(),n=new FormData;return r.a.createElement("div",{className:"container my-4"},r.a.createElement("h2",null,"Upload Anki file here"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n.append("lecture",a.current.value);var t=new XMLHttpRequest,r="http://".concat(window.location.hostname,"/api/cards/upload/");t.open("POST",r),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("X-CSRFToken",i("csrftoken")),t.onload=function(){200===t.status?window.location.href="http://".concat(window.location.hostname,"/"):403===t.status&&(window.location.href="http://".concat(window.location.hostname,"/login"))},t.send(n)},encType:"multipart/form-data"},r.a.createElement("input",{ref:t,type:"file",name:"file",onChange:function(e){n.append("file",e.target.files[0])}}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement(u,{reference:a})))},N=r.a.createElement,R=document.getElementById("card-form");R&&o.a.render(N(y,R.dataset),R);var k=document.getElementsByClassName("card-test")[0];k&&(console.log(k.dataset),o.a.render(N(E,k.dataset),k));var S=document.getElementById("card-upload");S&&o.a.render(r.a.createElement(O,null),S)},9:function(e,t,a){e.exports=a(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.97e2e4b7.chunk.js.map